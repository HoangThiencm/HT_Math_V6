<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HT_MATH_WEB - Chuy·ªÉn ƒë·ªïi PDF/·∫¢nh sang Markdown</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.6/dist/purify.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>HT_MATH_WEB V6</h1>
            <p class="subtitle">Chuy·ªÉn ƒë·ªïi PDF/·∫¢nh sang Markdown v·ªõi LaTeX</p>
            <p class="author">T√°c gi·∫£: Ho√†ng T·∫•n Thi√™n</p>
        </header>

        <!-- Authentication Section -->
        <div id="authSection" class="section">
            <div class="auth-container">
                <div id="loginForm" class="auth-form">
                    <h2>ƒêƒÉng nh·∫≠p</h2>
                    <input type="email" id="loginEmail" placeholder="Email" required>
                    <input type="password" id="loginPassword" placeholder="M·∫≠t kh·∫©u" required>
                    <button onclick="handleLogin()">ƒêƒÉng nh·∫≠p</button>
                    <p class="auth-switch">Ch∆∞a c√≥ t√†i kho·∫£n? <a href="#" onclick="showRegister()">ƒêƒÉng k√Ω</a></p>
                </div>
                <div id="registerForm" class="auth-form" style="display: none;">
                    <h2>ƒêƒÉng k√Ω</h2>
                    <input type="email" id="registerEmail" placeholder="Email" required>
                    <input type="password" id="registerPassword" placeholder="M·∫≠t kh·∫©u" required>
                    <button onclick="handleRegister()">ƒêƒÉng k√Ω</button>
                    <p class="auth-switch">ƒê√£ c√≥ t√†i kho·∫£n? <a href="#" onclick="showLogin()">ƒêƒÉng nh·∫≠p</a></p>
                </div>
            </div>
        </div>

        <!-- Main Application (hidden until login) -->
        <div id="mainApp" class="section" style="display: none;">
            <!-- Toolbar -->
            <div class="toolbar">
                <div class="toolbar-left">
                    <span class="toolbar-label"><b>H·ªá th·ªëng:</b></span>
                    <button class="btn-secondary" onclick="showConfig()">‚öôÔ∏è C·∫•u h√¨nh</button>
                    <span id="keyStatus" class="status-text">(0 Keys loaded)</span>
                </div>
                <div class="toolbar-right">
                    <button class="btn-secondary" onclick="handleLogout()">ƒêƒÉng xu·∫•t</button>
                </div>
            </div>

            <!-- Input Section -->
            <div class="group-box">
                <h3>ƒê·∫ßu v√†o</h3>
                <div class="input-group">
                    <input type="file" id="fileInput" accept=".pdf,.png,.jpg,.jpeg,.bmp" style="display: none;">
                    <input type="text" id="filePath" class="file-path" placeholder="Ch·ªçn file PDF ho·∫∑c ·∫£nh ƒë·ªÉ chuy·ªÉn ƒë·ªïi" readonly>
                    <button class="btn-primary" onclick="document.getElementById('fileInput').click()">üìÅ Ch·ªçn File</button>
                </div>
                <div class="input-group">
                    <button class="btn-secondary" onclick="handlePasteImage()">üìã D√°n ·∫£nh (Ctrl+V)</button>
                    <button class="btn-secondary" onclick="handleScreenshot()">üì∑ Ch·ª•p ·∫£nh m√†n h√¨nh</button>
                    <input type="file" id="screenshotInput" accept="image/*" capture="environment" style="display: none;">
                </div>
            </div>

            <!-- Options Section -->
            <div class="group-box">
                <h3>T√πy ch·ªçn chuy·ªÉn ƒë·ªïi</h3>
                <div class="options-row">
                    <label>Model:</label>
                    <select id="modelSelect" class="select-box">
                        <option value="gemini-1.5-flash">gemini-1.5-flash</option>
                        <option value="gemini-1.5-pro">gemini-1.5-pro</option>
                    </select>
                    <div class="radio-group">
                        <label><input type="radio" name="mode" value="latex" checked> Chuy·ªÉn ƒë·ªïi LaTeX</label>
                        <label><input type="radio" name="mode" value="text_only"> VƒÉn b·∫£n thu·∫ßn t√∫y</label>
                    </div>
                    <button class="btn-primary btn-convert" onclick="handleConvert()">‚ñ∂Ô∏è Th·ª±c hi·ªán (Ctrl+R)</button>
                </div>
                <div class="options-row">
                    <label><input type="checkbox" id="keepImages" checked> Gi·ªØ h√¨nh v·∫Ω trong file Word (ch√®n ·∫£nh t·ª´ng trang)</label>
                </div>
            </div>

            <!-- Results Section -->
            <div class="group-box">
                <h3>K·∫øt qu·∫£</h3>
                <div class="progress-container">
                    <div id="progressBar" class="progress-bar">
                        <div id="progressFill" class="progress-fill"></div>
                    </div>
                    <span id="progressText">0%</span>
                </div>
                <textarea id="resultText" class="result-text" placeholder="K·∫øt qu·∫£ s·∫Ω hi·ªÉn th·ªã ·ªü ƒë√¢y..."></textarea>
                <div id="statusLabel" class="status-label">S·∫µn s√†ng</div>
            </div>

            <!-- Export Section -->
            <div class="export-buttons">
                <button class="btn-secondary" onclick="handleReset()">üîÑ Reset (Ctrl+K)</button>
                <div class="export-right">
                    <button class="btn-primary" onclick="handleExportWord()">üíæ Xu·∫•t Word</button>
                    <button class="btn-primary" onclick="handleExportWordLatex()">üìÑ Xu·∫•t Word LaTeX</button>
                    <button class="btn-secondary" onclick="handleCopyText()">üìã Copy Text</button>
                </div>
            </div>
        </div>

        <!-- Config Modal -->
        <div id="configModal" class="modal" style="display: none;">
            <div class="modal-content">
                <h2>C·∫•u h√¨nh API & Model</h2>
                <div class="config-group">
                    <label>API Endpoint:</label>
                    <input type="text" id="apiEndpoint" placeholder="https://your-app.hf.space" value="">
                </div>
                <div class="config-group">
                    <label>S·ªë trang x·ª≠ l√Ω ƒë·ªìng th·ªùi (Khuy√™n d√πng 3-5):</label>
                    <select id="threadCount">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3" selected>3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                </div>
                <div class="modal-buttons">
                    <button class="btn-primary" onclick="saveConfig()">L∆∞u</button>
                    <button class="btn-secondary" onclick="closeConfig()">ƒê√≥ng</button>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>

